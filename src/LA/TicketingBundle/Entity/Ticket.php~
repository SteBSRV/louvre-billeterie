<?php
// src/LA/TicketingBundle/Entity/Ticket.php

namespace LA\TicketingBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Validator\Context\ExecutionContext;

/**
 * @ORM\Table(name="la_ticket")
 * @ORM\Entity(repositoryClass="LA\TicketingBundle\Repository\TicketRepository")
 */
class Ticket
{
  const PRICE_FREE    = 0;
  const PRICE_KID     = 800;
  const PRICE_NORMAL  = 1600;
  const PRICE_SENIOR  = 1200;
  const PRICE_REDUCED = 1000;

  /**
   * @ORM\Column(name="id", type="integer")
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="AUTO")
   */
  protected $id;

  /**
   * @ORM\Column(name="name", type="string", length=255)
   * @Assert\NotBlank()
   */
  protected $name;

  /**
   * @ORM\Column(name="first_name", type="string", length=255)
   * @Assert\NotBlank()
   */
  protected $firstName;

  /**
   * @ORM\Column(name="country", type="string")
   * @Assert\Type("string")
   */
  protected $country;

  /**
   * @ORM\Column(name="birth_date", type="date")
   * @Assert\DateTime()
   */
  protected $birthDate;

  /**
   * @ORM\Column(name="reduced", type="boolean")
   * @Assert\Type("bool")
   */
  protected $reduced = false;

  /**
   * @ORM\Column(name="price", type="integer")
   * @Assert\Type("integer")
   */
  protected $price;

  /**
   * @ORM\Column(name="validation_code", type="string", nullable=true)
   * @Assert\Type("string")
   */
  protected $validationCode;

  /**
   * @ORM\ManyToOne(targetEntity="LA\TicketingBundle\Entity\Command", inversedBy="tickets", cascade={"persist"})
   * @ORM\JoinColumn(name="command_id", referencedColumnName="id")
   * @Assert\Type("object")
   */
  protected $command;

  /**
   * @ORM\Column(name="used", type="boolean", nullable=true)
   * @Assert\Type("bool")
   */
  protected $used = false;
}